webpackJsonp([1],{"67UX":function(t,s){},FqRh:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var M=e("7+uW"),i={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]};var a=e("VU/8")({name:"App"},i,!1,function(t){e("r525")},null,null).exports,L=e("/ocq"),u=e("mtWM"),r=e.n(u),n={props:["authKey"],data:function(){return{time:new Date,yesterday:"",ticketFrom:"",ticketTo:"",request_id:"",ticketClass:"E",isEmpty:!1,disabledDates:{to:new Date},loadingResults:!1,error:""}},methods:{searchTickets:function(){var t=this;this.$emit("finedOffers",null),this.isEmpty=!1,this.loadingResults=!0;var s=document.querySelector("#datepicker").value,e={directions:[{departure_code:this.ticketFrom.toUpperCase(),arrival_code:this.ticketTo.toUpperCase(),date:s}],adult_qnt:1,class:this.ticketClass,fare_types:["PUB","NEG"]},M={"etm-auth-key":this.authKey};r.a.post("https://api-stage.etm-system.com/api/air/search",e,{headers:M}).then(function(s){t.request_id=s.data.request_id,t.getAvailableOffers(t.request_id)}).catch(function(s){t.error=s,t.loadingResults=!1})},getAvailableOffers:function(t){var s=this,e={"etm-auth-key":this.authKey};r.a.get("https://api-stage.etm-system.com/api/air/offers?request_id="+t+"&sort=price",{headers:e}).then(function(t){"InProcess"===t.data.status?setTimeout(function(){s.getAvailableOffers(s.request_id)},500):"Ready"===t.data.status?(s.$emit("finedOffers",t.data),s.loadingResults=!1):(s.loadingResults=!1,s.isEmpty=!0)}).catch(function(t){s.error=t,s.loadingResults=!1})},getDisabledDate:function(){var t=new Date,s=new Date;s.setDate(t.getDate()-1),this.disabledDates.to=s}},mounted:function(){this.getDisabledDate()},components:{Datepicker:e("IC97").a}},N={render:function(){var t=this,s=t.$createElement,M=t._self._c||s;return M("div",[M("form",{on:{submit:function(s){return s.preventDefault(),t.searchTickets(s)}}},[M("div",{staticClass:"search_from"},[M("div",{staticClass:"search_input"},[M("label",[t._v("Откуда")]),t._v(" "),M("input",{directives:[{name:"model",rawName:"v-model",value:t.ticketFrom,expression:"ticketFrom"}],staticClass:"input_fild",attrs:{type:"text",required:""},domProps:{value:t.ticketFrom},on:{input:function(s){s.target.composing||(t.ticketFrom=s.target.value)}}})]),t._v(" "),M("div",{staticClass:"search_input"},[M("label",[t._v("Куда")]),t._v(" "),M("input",{directives:[{name:"model",rawName:"v-model",value:t.ticketTo,expression:"ticketTo"}],staticClass:"input_fild",attrs:{type:"text",required:""},domProps:{value:t.ticketTo},on:{input:function(s){s.target.composing||(t.ticketTo=s.target.value)}}})]),t._v(" "),M("div",{staticClass:"search_input"},[M("label",[t._v("Класс")]),t._v(" "),M("select",{directives:[{name:"model",rawName:"v-model",value:t.ticketClass,expression:"ticketClass"}],staticClass:"select_class",on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.ticketClass=s.target.multiple?e:e[0]}}},[M("option",{attrs:{value:"E"}},[t._v("Эконом")]),t._v(" "),M("option",{attrs:{value:"W"}},[t._v("Премиум Эконом")]),t._v(" "),M("option",{attrs:{value:"B"}},[t._v("Бизнес")]),t._v(" "),M("option",{attrs:{value:"F"}},[t._v("Первый")])])]),t._v(" "),M("div",{staticClass:"search_input datepicker"},[M("label",[t._v("Дата отправления")]),t._v(" "),M("datepicker",{attrs:{id:"datepicker",format:"yyyy-MM-dd",disabledDates:t.disabledDates,required:"required"},model:{value:t.time,callback:function(s){t.time=s},expression:"time"}})],1),t._v(" "),M("div",{staticClass:"search_button"},[M("button",{staticClass:"btn",attrs:{type:"submit",disabled:t.loadingResults}},[t._v("Поиск")])])])]),t._v(" "),t.loadingResults?M("div",{staticClass:"loading"},[M("img",{attrs:{src:e("nuJt"),alt:""}})]):t._e(),t._v(" "),t.isEmpty?M("div",{staticClass:"empty"},[M("h4",[t._v("Рейсы по Вашему запросу не найдены")])]):t._e()])},staticRenderFns:[]};var w=e("VU/8")(n,N,!1,function(t){e("Vol/")},null,null).exports,c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"offer_item"},[e("div",{staticClass:"offer_header"},[e("div",{staticClass:"carrier_logo"},[e("img",{attrs:{src:t.offer.carrier_logo,alt:t.offer.carrier_name}}),t._v(" "),e("span",{staticClass:"carrier_name"},[t._v(t._s(t.offer.carrier_name))])]),t._v(" "),e("div",{staticClass:"right_side"},[e("div",{staticClass:"min_price"},[e("span",{staticClass:"price"},[t._v("Цена от "+t._s(t.offer.min_price)+" "),e("span",{staticClass:"currency"},[t._v(t._s(t.currency))])])]),t._v(" "),e("div",{staticClass:"show_more",class:{active:t.showAll},on:{click:function(s){t.showAll=!t.showAll}}})])]),t._v(" "),t.showAll?e("div",{staticClass:"all_offers"},t._l(t.segments,function(s,M){return e("div",{key:M,staticClass:"offer_detale"},[e("span",[t._v("Время в пути: "+t._s(s.duration_formated))]),t._v(" "),e("br"),t._v(" "),e("div",["0"===s.stops?e("span",[t._v("Без пересадок")]):e("span",[t._v("Пересадок: "+t._s(s.stops))])]),t._v(" "),e("span",[t._v("Цена: "+t._s(s.price)+" "),e("span",{staticClass:"currency"},[t._v(t._s(t.currency))])])])}),0):t._e()])},staticRenderFns:[]};var D={props:["offers"],data:function(){return{}},computed:{avalableOffers:function(){if(this.offers)return this.offers.offers}},components:{OfferItem:e("VU/8")({props:["offer","currency"],data:function(){return{showAll:!1}},computed:{segments:function(){return this.offer.offers[0].segments}}},c,!1,function(t){e("FqRh")},null,null).exports}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"offer-list"},t._l(t.avalableOffers,function(s,M){return e("offer-item",{key:M,attrs:{offer:s,currency:t.offers.currency}})}),1)},staticRenderFns:[]};var l={name:"SearchPage",data:function(){return{api_key:"8e71ac9f18",auth_key:"",offers:null}},components:{SearchForm:w,OffersList:e("VU/8")(D,o,!1,function(t){e("67UX")},null,null).exports},methods:{getFinedOffers:function(t){this.offers=t}},mounted:function(){var t=this;r.a.get("https://api-stage.etm-system.com/api/login/"+this.api_key).then(function(s){return t.auth_key=s.data.etm_auth_key})}},j={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"search-page"},[s("h1",{staticClass:"title"},[this._v("Поиск авиабилетов")]),this._v(" "),s("search-form",{attrs:{authKey:this.auth_key},on:{finedOffers:this.getFinedOffers}}),this._v(" "),s("offers-list",{attrs:{offers:this.offers}})],1)},staticRenderFns:[]},y=e("VU/8")(l,j,!1,null,null,null).exports;M.a.use(L.a);var z=new L.a({routes:[{path:"/",name:"Main",component:y}]});M.a.config.productionTip=!1,new M.a({el:"#app",router:z,components:{App:a},template:"<App/>"})},"Vol/":function(t,s){},nuJt:function(t,s){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIyNTBweCIgaGVpZ2h0PSI0NXB4IiB2aWV3Qm94PSIwIDAgMTI4IDIzIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9IjEiIGQ9Ik01OC4zODEsNi41OUw1MS4wNiwxMS4zMzcsNTUuNiwxMS41LDcwLjksNi42NDUsODMsNi44MTFhMS45NTgsMS45NTgsMCwwLDAsMS40MjQtMS4xYzAuMzczLS45MzgtMC43My0xLjUzMy0xLjUtMi4zMzJTNzkuNzY2LDIuMyw3OS43NjYsMi4zTDY4LjIzNywyLjI1NGwtNi41NDYtMi0zLjIwOC4xMjEsMS44ODQsMi40MTMtNi44LjE2TDUwLjczMywwLjMzMmwtMS45ODUtLjAyMSwxLjMsMy4zQTguOTEzLDguOTEzLDAsMCwwLDUwLjEsNS4xMmEzLjU3NSwzLjU3NSwwLDAsMCwuNzY1LDEuMjc0WiIvPjxnPjxwYXRoIGZpbGw9IiM1MGE4ZWIiIGZpbGwtb3BhY2l0eT0iMSIgZD0iTTQ0Ljc1LDIzLjkyN2E1LjY0MSw1LjY0MSwwLDAsMS01LjY2MSw1LjY4OSw1LjYzNCw1LjYzNCwwLDAsMS0xLjAyNSwwSDE2LjQ0NGE2LjA3OSw2LjA3OSwwLDAsMS0uMzM4LTEyLjEzOSw2LjE2OCw2LjE2OCwwLDAsMS0uNjA2LTIuNjYyYzAtMy44MDgsMy41MDYtNi44OTQsNy44MzEtNi44OTRhNy44OTEsNy44OTEsMCwwLDEsNy4yNjEsNC4zMTIsNy4yLDcuMiwwLDAsMSwyLjc4Ny0uNTUyYzMuNDY1LDAsNi4yNzUsMi4zNzQsNi4yNzUsNS4zYTQuNTM0LDQuNTM0LDAsMCwxLS4xNTYsMS4xNzRBNS43MzQsNS43MzQsMCwwLDEsNDQuNzUsMjMuOTI3Wk0xMTAuNSwxMy41NzFhMy4yNzMsMy4yNzMsMCwwLDEtMy4zMDYsMy4yOCwzLjMzNiwzLjMzNiwwLDAsMS0uNiwwSDkzLjk3MWEzLjUsMy41LDAsMCwxLS4yLTcsMy41MTksMy41MTksMCwwLDEtLjM1NC0xLjUzNWMwLTIuMTk1LDIuMDQ3LTMuOTc0LDQuNTczLTMuOTc0YTQuNjE1LDQuNjE1LDAsMCwxLDQuMjQsMi40ODYsNC4yNTUsNC4yNTUsMCwwLDEsMS42MjgtLjMxOGMyLjAyMywwLDMuNjY0LDEuMzY5LDMuNjY0LDMuMDU3YTIuNTgxLDIuNTgxLDAsMCwxLS4wOTEuNjc3QTMuMzIzLDMuMzIzLDAsMCwxLDExMC41LDEzLjU3MVpNODguMjUsMjguMDNhNC4xMzcsNC4xMzcsMCwwLDEtNC4xNzQsNC4xNSw0LjIsNC4yLDAsMCwxLS43NTYsMEg2Ny4zODJhNC40MzIsNC40MzIsMCwwLDEtLjI0OS04Ljg1NCw0LjQ2LDQuNDYsMCwwLDEtLjQ0Ny0xLjk0MmMwLTIuNzc3LDIuNTg1LTUuMDI5LDUuNzczLTUuMDI5QTUuODI2LDUuODI2LDAsMCwxLDc3LjgxMywxOS41YTUuMzU1LDUuMzU1LDAsMCwxLDIuMDU1LS40YzIuNTU1LDAsNC42MjYsMS43MzIsNC42MjYsMy44NjhhMy4yNzIsMy4yNzIsMCwwLDEtLjExNS44NTZBNC4yLDQuMiwwLDAsMSw4OC4yNSwyOC4wM1ptLTY1LTI5LjM4OWE0LjEzNyw0LjEzNywwLDAsMS00LjE3NCw0LjE1LDQuMiw0LjIsMCwwLDEtLjc1NiwwSDIuMzgyQTQuNDA3LDQuNDA3LDAsMCwxLTItMS42NCw0LjQxLDQuNDEsMCwwLDEsMi4xMzMtNi4wNjRhNC40Niw0LjQ2LDAsMCwxLS40NDctMS45NDJjMC0yLjc3NywyLjU4NS01LjAyOSw1Ljc3My01LjAyOWE1LjgyNiw1LjgyNiwwLDAsMSw1LjM1MywzLjE0NSw1LjM1Nyw1LjM1NywwLDAsMSwyLjA1NS0uNGMyLjU1NSwwLDQuNjI2LDEuNzMyLDQuNjI2LDMuODY4YTMuMjczLDMuMjczLDAsMCwxLS4xMTUuODU2QTQuMiw0LjIsMCwwLDEsMjMuMjUtMS4zNTlaTTE3NSwyMy45MjdhNi4xOTIsNi4xOTIsMCwwLDEtNi42ODYsNS42ODloLTIxLjYyYTYuMDc5LDYuMDc5LDAsMCwxLS4zMzgtMTIuMTM5LDYuMTgsNi4xOCwwLDAsMS0uNi0yLjY2MmMwLTMuODA4LDMuNTA2LTYuODk0LDcuODMxLTYuODk0YTcuODksNy44OSwwLDAsMSw3LjI2MSw0LjMxMiw3LjIsNy4yLDAsMCwxLDIuNzg4LS41NTJjMy40NjUsMCw2LjI3NCwyLjM3NCw2LjI3NCw1LjNhNC41MzQsNC41MzQsMCwwLDEtLjE1NiwxLjE3NEE1LjczNCw1LjczNCwwLDAsMSwxNzUsMjMuOTI3Wm02NS43NS0xMC4zNTZhMy4yNzMsMy4yNzMsMCwwLDEtMy4zMDYsMy4yOCwzLjMzNiwzLjMzNiwwLDAsMS0uNiwwSDIyNC4yMjFhMy41LDMuNSwwLDAsMS0uMi03LDMuNTE0LDMuNTE0LDAsMCwxLS4zNTQtMS41MzVjMC0yLjE5NSwyLjA0OC0zLjk3NCw0LjU3My0zLjk3NGE0LjYxNSw0LjYxNSwwLDAsMSw0LjI0LDIuNDg2LDQuMjU1LDQuMjU1LDAsMCwxLDEuNjI4LS4zMThjMi4wMjMsMCwzLjY2NCwxLjM2OSwzLjY2NCwzLjA1N2EyLjU4MSwyLjU4MSwwLDAsMS0uMDkxLjY3N0EzLjMyMywzLjMyMywwLDAsMSwyNDAuNzUsMTMuNTcxWk0yMTguNSwyOC4wM2E0LjEzNyw0LjEzNywwLDAsMS00LjE3NCw0LjE1LDQuMTkzLDQuMTkzLDAsMCwxLS43NTUsMEgxOTcuNjMyYTQuNDMyLDQuNDMyLDAsMCwxLS4yNDktOC44NTQsNC40NjUsNC40NjUsMCwwLDEtLjQ0Ni0xLjk0MmMwLTIuNzc3LDIuNTg0LTUuMDI5LDUuNzczLTUuMDI5YTUuODI1LDUuODI1LDAsMCwxLDUuMzUzLDMuMTQ2LDUuMzYsNS4zNiwwLDAsMSwyLjA1NS0uNGMyLjU1NSwwLDQuNjI2LDEuNzMyLDQuNjI2LDMuODY4YTMuMjkzLDMuMjkzLDAsMCwxLS4xMTUuODU2QTQuMiw0LjIsMCwwLDEsMjE4LjUsMjguMDNabS02NS0yOS4zODlhNC4xMzcsNC4xMzcsMCwwLDEtNC4xNzQsNC4xNSw0LjE5NCw0LjE5NCwwLDAsMS0uNzU1LDBIMTMyLjYzMkE0LjQwNyw0LjQwNywwLDAsMSwxMjguMjUtMS42NGE0LjQxLDQuNDEsMCwwLDEsNC4xMzMtNC40MjMsNC40NjUsNC40NjUsMCwwLDEtLjQ0Ni0xLjk0MmMwLTIuNzc3LDIuNTg0LTUuMDI5LDUuNzczLTUuMDI5YTUuODI1LDUuODI1LDAsMCwxLDUuMzUzLDMuMTQ1LDUuMzYzLDUuMzYzLDAsMCwxLDIuMDU1LS40YzIuNTU1LDAsNC42MjYsMS43MzIsNC42MjYsMy44NjhhMy4yOTQsMy4yOTQsMCwwLDEtLjExNS44NTZBNC4yLDQuMiwwLDAsMSwxNTMuNS0xLjM1OVoiLz4KPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJ0cmFuc2xhdGUiIGZyb209IjAgMCIgdG89Ii0xMzAgMCIgZHVyPSIyNzAwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9nPjwvc3ZnPgo="},r525:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.2031dc71ce7558abb33c.js.map